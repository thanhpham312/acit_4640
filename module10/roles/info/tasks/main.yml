---
- name: Get IP Info
  ipify_facts:
  register: ip_data

- name: Output Public IP
  debug:
    msg: 'EC2 Instance Public IP: {{ ip_data.ansible_facts.ipify_public_ip }}'

- name: Check nginx Status
  become: yes
  command: systemctl status nginx
  ignore_errors: yes
  changed_when: false
  register: nginx_data

- name: Output nginx Status
  debug:
    msg: '{{ nginx_data }}'

- name: Check Application Status
  become: yes
  command: systemctl status todoapp
  ignore_errors: yes
  changed_when: false
  register: app_data

- name: Output App Status
  debug:
    msg: '{{ app_data }}'